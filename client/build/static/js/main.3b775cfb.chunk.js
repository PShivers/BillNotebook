(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{166:function(e,t,n){e.exports=n(335)},171:function(e,t,n){},335:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(35),o=n.n(l),c=n(27),i=n(6),u=n(7),s=n(9),h=n(8),m=n(10),p=(n(171),n(91)),d=n(340),f=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.copayers.map((function(t){return r.a.createElement("div",{style:{cursor:"pointer"},key:t._id,onClick:function(){e.props.addCopayerToBill(t,e.props.bill,e.props.futureAmountPerPerson)}},t.name)}));return r.a.createElement(d.a,{content:t,trigger:r.a.createElement("div",null,"+"),hoverable:!0})}}]),t}(a.Component),y=function(e){var t=e.bill,n=(t.amount/(t.copayers.length+1)).toFixed(2),a=(t.amount/(t.copayers.length+2)).toFixed(2);return r.a.createElement("tr",{key:t._id},r.a.createElement("td",{className:"flex centered"},r.a.createElement("div",{onClick:function(){e.handleBillNameClick(t)},style:{cursor:"pointer"}},function(e){return e.isPaid?r.a.createElement("h2",{className:"ui center aligned header",style:{textDecoration:"line-through"}},e.name):r.a.createElement("h2",{className:"ui center aligned header"},e.name)}(t)),r.a.createElement("div",{className:"flex centered delete-button",onClick:function(){e.deleteBill(t)}},"X")),r.a.createElement("td",{className:"single line",onClick:function(){e.handleBillAmountClick(t)}},r.a.createElement("div",{style:{cursor:"pointer"}},function(e){return e.isWithdrawn?r.a.createElement("div",{style:{textDecoration:"line-through"}},"$",e.amount):r.a.createElement("div",null,"$",e.amount)}(t))),r.a.createElement("td",{className:"center aligned"},r.a.createElement(f,{copayers:e.copayers,bill:t,futureAmountPerPerson:a,addCopayerToBill:e.addCopayerToBill}),t.copayers.map((function(n){return n.hasPaid?n.hasPaid?r.a.createElement("div",{onClick:function(){e.handleCopayerToggle(t,n)},style:{textDecoration:"line-through"}},n.name):void 0:r.a.createElement("div",{onClick:function(){e.handleCopayerToggle(t,n)}},n.name)}))),function(e){return e.copayers.length>0?r.a.createElement("td",null,"$",n):r.a.createElement("td",null)}(t),r.a.createElement("td",null,t.dueDate))},b=n(339),g=n(22),v=n.n(g);function O(e){return v.a.put("/bills/".concat(e._id),e)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={total:[],copayers:[]},n.addCopayerToBill=function(e,t,a){console.log(a);var r=C({},e),l=C({},t);r.bills=[].concat(Object(p.a)(e.bills),[{id:t._id,hasPaid:!1}]),l.copayers=[].concat(Object(p.a)(t.copayers),[{id:e._id,hasPaid:!1,name:e.name}]),O(l).then((function(e){(function(e){return v.a.put("/copayers/".concat(e._id),e)})(r).then((function(e){console.log(e),n.props.refresh()}))}))},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;v.a.get("/copayers").then((function(t){var n=t.data;e.setState({copayers:n})}))}},{key:"render",value:function(){var e=this,t=0,n=[0],a=[0];return r.a.createElement(b.a,{striped:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"single line"},"Bill"),r.a.createElement("th",null,"Total Amount Due"),r.a.createElement("th",null,"Co-Payers"),r.a.createElement("th",null,"Amount Per Person"),r.a.createElement("th",null,"Due Date"))),r.a.createElement("tbody",null,this.props.bills.map((function(t){if(!t.isArchived)return r.a.createElement(y,{bill:t,deleteBill:e.props.deleteBill,copayers:e.state.copayers,isBillPaid:e.isBillPaid,handleBillNameClick:e.props.handleBillNameClick,handleBillAmountClick:e.props.handleBillAmountClick,handleCopayerToggle:e.props.handleCopayerToggle,addCopayerToBill:e.addCopayerToBill})}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"single line"},"Total"),r.a.createElement("th",null,this.props.bills.map((function(e){e.isArchived||(t+=e.amount)})),"$",t),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"single line",style:{backgroundColor:"red"}},"Total Due"),r.a.createElement("th",null,this.props.bills.map((function(e){e.isWithdrawn||e.isArchived||a.push(e.amount)})),"$",a.reduce((function(e,t){return e+t}))),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"single line",style:{backgroundColor:"green"}},"Total Paid"),r.a.createElement("th",null,this.props.bills.map((function(e){e.isWithdrawn&&!e.isArchived&&n.push(e.amount)})),"$",n.reduce((function(e,t){return e+t}))),r.a.createElement("th",null),r.a.createElement("th",null),r.a.createElement("th",null))))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("h2",{className:"ui center aligned icon header title"},r.a.createElement("div",{className:"content title"},"BillBook"))}}]),t}(a.Component),B=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui center aligned",style:{marginLeft:"38%"}},r.a.createElement("tr",null,r.a.createElement("th",{colSpan:"5"},r.a.createElement("div",{className:"ui centered pagination menu"},r.a.createElement("div",{href:"#",className:"icon item",onClick:this.props.changeMonth},r.a.createElement("i",{className:"left chevron icon"})),r.a.createElement("div",{className:"ui segment"},"Month of ",this.props.monthName," "),r.a.createElement("div",{href:"#",className:"icon item",onClick:this.props.changeMonth},r.a.createElement("i",{className:"right chevron icon"}))))))}}]),t}(a.Component),P=n(341);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={showForm:!1,newBill:{name:"",amount:null,dueDate:null,isPaid:!1}},n.handleClick=function(){n.setState({showForm:!n.state.showForm,newBill:{name:"",amount:null,dueDate:null,isPaid:!1}})},n.handleSubmitClick=function(e){e.preventDefault();var t=N({},n.state.newBill),a=t.dueDate.split("-");t.month=parseInt(a[1])-1,t.year=parseInt(a[0]),t.day=parseInt(a[2]),t.dueDate=a[1]+"/"+a[2],console.log(t),n.props.addBill(t),n.handleClick()},n.handleChange=function(e){var t=e.target.name,a=e.target.value,r=N({},n.state.newBill);r[t]=a,n.setState({newBill:r},(function(){console.log(n.state.newBill)}))},n.formToggle=function(){if(n.state.showForm)return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("input",{type:"text",name:"name",placeholder:"Bill Name",onChange:n.handleChange,value:n.state.newBill.name}),r.a.createElement("input",{type:"number",name:"amount",placeholder:"Bill Amount",onChange:n.handleChange,value:n.state.newBill.amount}),r.a.createElement("input",{type:"date",placeholder:"Due Date",onChange:n.handleChange,name:"dueDate"}),r.a.createElement("input",{type:"Submit",onClick:n.handleSubmitClick})))},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex column centered margin"},r.a.createElement(P.a,{onClick:this.handleClick},"Add Bill"),r.a.createElement("div",null,this.formToggle()))}}]),t}(a.Component);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var M=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(l)))).state={showForm:!1,newCopayer:{name:"",email:""}},n.handleClick=function(){n.setState({showForm:!n.state.showForm})},n.handleChange=function(e){e.preventDefault();var t=e.target.name,a=e.target.value,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.state.newCopayer);r[t]=a,n.setState({newCopayer:r},(function(){}))},n.handleSubmit=function(e){n.props.createCopayer(n.state.newCopayer)},n.formToggle=function(){if(n.state.showForm)return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("input",{name:"name",placeholder:"Name",type:"text",onChange:n.handleChange,value:n.state.newCopayer.name}),r.a.createElement("input",{name:"email",placeholder:"Email Address",type:"text",onChange:n.handleChange,value:n.state.newCopayer.email}),r.a.createElement("button",{type:"submit",onClick:n.handleSubmit},"Submit")))},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"flex column centered"},r.a.createElement(P.a,{onClick:this.handleClick},"Create Copayer"),this.formToggle())}}]),t}(a.Component),S=n(49);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,bills:[],newBill:{name:"",amount:null,dueDate:null,isPaid:!1},monthNum:null,monthName:"",currentYear:null,months:["January","February","March","April","May","June","July","August","September","October","November","December"]},n.componentDidMount=function(){n.getBillsForCurrentMonth()},n.sortArrayByKey=function(e,t){return e.sort((function(e,n){var a=e[t],r=n[t];return a<r?-1:a>r?1:0}))},n.refresh=function(){n.getBillsForCurrentMonth()},n.getBillsForCurrentMonth=function(){var e,t=new Date,a=t.getFullYear();(e={monthNum:t.getMonth(),year:t.getFullYear()},v.a.get("/bills/".concat(e.year,"/").concat(e.monthNum))).then((function(e){var r=e.data,l=n.sortArrayByKey(r,"day");n.setState({bills:l,currentYear:a,monthName:n.state.months[t.getMonth()]})}))},n.changeMonth=function(e){console.log(n.state.currentMonth),e?n.setState({currentMonthNum:n.currentMonthNum++}):n.setState({currentMonthNum:n.currentMonthNum--})},n.addBill=function(e){(function(e){return v.a.post("/bills",e)})(e).then((function(e){n.getBillsForCurrentMonth()}))},n.createCopayer=function(e){(function(e){return v.a.post("/copayers",e)})(e).then((function(e){console.log(e)}))},n.deleteBill=function(e){var t=T({},e);t.isArchived=!0,O(t).then((function(e){n.getBillsForCurrentMonth()}))},n.handleBillNameClick=function(e){if(e.isWithdrawn)alert("Cannot remove Paid status if Bill has been marked as withdrawn");else{var t=T({},e);t.isPaid=!e.isPaid,O(t).then((function(e){n.getBillsForCurrentMonth()}))}},n.handleBillAmountClick=function(e){if(e.isPaid){var t=T({},e);t.isWithdrawn=!e.isWithdrawn,O(t).then((function(e){n.getBillsForCurrentMonth()}))}else alert("Bill must be marked as paid before it can be marked as withdrawn.")},n.handleCopayerToggle=function(e,t){var a=T({},t);a.hasPaid=!t.hasPaid;var r=T({},e),l=r.copayers.indexOf(r.copayers.find((function(e){return e.id==a.id})));r.copayers[l]=a,O(r).then((function(e){n.getBillsForCurrentMonth()}))},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"top-portion"},"heroku         ",r.a.createElement(w,null),r.a.createElement(B,{currentMonth:this.state.currentMonth,monthName:this.state.monthName,changeMonth:this.changeMonth}),r.a.createElement(D,{handleBillFormChange:this.handleBillFormChange,addBill:this.addBill}),r.a.createElement(M,{createCopayer:this.createCopayer})),r.a.createElement(j,{bills:this.state.bills,deleteBill:this.deleteBill,handleBillNameClick:this.handleBillNameClick,handleBillAmountClick:this.handleBillAmountClick,handleCopayerToggle:this.handleCopayerToggle,refresh:this.refresh}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(332),n(334);var W=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(S.ParallaxProvider,null,r.a.createElement(x,null))}}]),t}(a.Component);o.a.render(r.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[166,1,2]]]);
//# sourceMappingURL=main.3b775cfb.chunk.js.map